-- WARNING: ghc.cabal is automatically generated from ghc.cabal.in by
-- ./configure.  Make sure you are editing ghc.cabal.in, not ghc.cabal.

Name: ghc
Version: @ProjectVersionMunged@
License: BSD3
License-File: ../LICENSE
Author: The GHC Team
Maintainer: glasgow-haskell-users@haskell.org
Homepage: http://www.haskell.org/ghc/
Synopsis: The GHC API
Description:
    GHC's functionality can be useful for more things than just
    compiling Haskell programs. Important use cases are programs
    that analyse (and perhaps transform) Haskell code. Others
    include loading Haskell code dynamically in a GHCi-like manner.
    For this reason, a lot of GHC's functionality is made available
    through this package.
Category: Development
Build-Type: Simple
Cabal-Version: >=1.10

Flag ghci
    Description: Build GHCi support.
    Default: False
    Manual: True

Flag stage1
    Description: Is this stage 1?
    Default: False
    Manual: True

Flag stage2
    Description: Is this stage 2?
    Default: False
    Manual: True

Flag stage3
    Description: Is this stage 3?
    Default: False
    Manual: True

Flag terminfo
    Description: Build GHC with terminfo support on non-Windows platforms.
    Default: True
    Manual: True

Library
    Default-Language: Haskell2010
    Exposed: False

    Build-Depends: base       >= 4.9 && < 5,
                   deepseq    >= 1.4 && < 1.5,
                   directory  >= 1   && < 1.4,
                   process    >= 1   && < 1.7,
                   bytestring >= 0.9 && < 0.11,
                   binary     == 0.8.*,
                   time       >= 1.4 && < 1.9,
                   containers >= 0.5 && < 0.6,
                   array      >= 0.1 && < 0.6,
                   filepath   >= 1   && < 1.5,
                   template-haskell == 2.13.*,
                   hpc        == 0.6.*,
                   transformers == 0.5.*,
                   ghc-boot   == @ProjectVersionMunged@,
                   ghc-boot-th == @ProjectVersionMunged@,
                   ghci == @ProjectVersionMunged@

    if os(windows)
        Build-Depends: Win32  >= 2.3 && < 2.6
    else
        if flag(terminfo)
            Build-Depends: terminfo == 0.4.*
        Build-Depends: unix   == 2.7.*

    GHC-Options: -Wall
                 -Wno-name-shadowing
                 -Wnoncanonical-monad-instances
                 -Wnoncanonical-monadfail-instances
                 -Wnoncanonical-monoid-instances

    if flag(ghci)
        CPP-Options: -DGHCI
        Include-Dirs: ../rts/dist/build @FFIIncludeDir@

    Other-Extensions:
        BangPatterns
        CPP
        DataKinds
        DeriveDataTypeable
        DeriveFoldable
        DeriveFunctor
        DeriveTraversable
        DisambiguateRecordFields
        ExplicitForAll
        FlexibleContexts
        FlexibleInstances
        GADTs
        GeneralizedNewtypeDeriving
        MagicHash
        MultiParamTypeClasses
        NamedFieldPuns
        NondecreasingIndentation
        RankNTypes
        RecordWildCards
        ScopedTypeVariables
        StandaloneDeriving
        Trustworthy
        TupleSections
        TypeFamilies
        TypeSynonymInstances
        UnboxedTuples
        UndecidableInstances

    Include-Dirs: . cbits

    -- We need to set the unit id to ghc (without a version number)
    -- as it's magic.
    GHC-Options: -this-unit-id ghc

    if flag(stage1)
        Include-Dirs: stage1
    else
        if flag(stage2)
            Include-Dirs: stage2
        else
            if flag(stage3)
                Include-Dirs: stage2

    Install-Includes: HsVersions.h, ghc_boot_platform.h

    c-sources:
        cbits/cutils.c
        cbits/keepCAFsForGHCi.c
        cbits/genSym.c

    hs-source-dirs:
        ./

    -- we use an explicit Prelude
    Default-Extensions:
        NoImplicitPrelude

    Other-Modules:
        GHC.Prelude

    Exposed-Modules:
        GHC.Util.Ar
        GHC.Util.FileCleanup
        GHC.Driver.Backpack.Main
        GHC.Driver.Backpack.Syntax
        GHC.CoreTypes.NameShape
        GHC.Interface.Rename
        GHC.CoreTypes.Available
        GHC.Util.Assembler
        GHC.CoreTypes.BasicTypes
        GHC.CoreTypes.ConLike
        GHC.CoreTypes.DataCon
        GHC.CoreTypes.PatternSynonym
        GHC.CoreTypes.Demand
        GHC.Cmm.Syntax.DebugBlock
        GHC.Util.Exception
        GHC.CoreTypes.FieldLabel
        GHC.Monad
        GHC.Config.Hooks
        GHC.CoreTypes.Id
        GHC.CoreTypes.Id.Info
        GHC.Util.Lexeme
        GHC.CoreTypes.Literal
        GHC.CmmToLlvm
        GHC.Llvm.Syntax
        GHC.Llvm.MetaData
        GHC.Llvm.Printer
        GHC.Llvm.Types
        GHC.CmmToLlvm.CodeGen
        GHC.CmmToLlvm.CodeGen.Base
        GHC.CmmToLlvm.CodeGen.Proc
        GHC.CmmToLlvm.CodeGen.Data
        GHC.CmmToLlvm.CodeGen.PrettyPrint
        GHC.CmmToLlvm.CodeGen.Regs
        GHC.CmmToLlvm.Fixup
        GHC.CoreTypes.Id.Make
        GHC.CoreTypes.Module
        GHC.CoreTypes.Name
        GHC.CoreTypes.Name.Environment
        GHC.CoreTypes.Name.Set
        GHC.CoreTypes.OccName
        GHC.CoreTypes.RdrName
        GHC.CoreTypes.Name.Cache
        GHC.CoreTypes.SrcLoc
        GHC.Data.UniqueSupply
        GHC.CoreTypes.Unique
        GHC.CoreTypes.Var
        GHC.CoreTypes.Var.Environment
        GHC.CoreTypes.Var.Set
        GHC.CoreTypes.Var.UndirectedGraph
        GHC.Cmm.Syntax.BlockId
        GHC.CoreTypes.CLabel
        GHC.Cmm.Syntax
        GHC.Cmm.InfoTableBuilder
        GHC.Cmm.Pipeline
        GHC.Cmm.Syntax.CallConvention
        GHC.Cmm.CommonBlockElim
        GHC.Cmm.Switch.Implement
        GHC.Cmm.Shortcutter
        GHC.Cmm.Syntax.Expression
        GHC.RTS.InfoTable
        GHC.Cmm.Lexer
        GHC.Cmm.Lint
        GHC.Cmm.Liveness
        GHC.Cmm.Syntax.MachinePrimOps
        GHC.Cmm.Parser.Monad
        GHC.Cmm.Switch
        GHC.Cmm.Syntax.Node
        GHC.Cmm.ConstantFolder
        GHC.Cmm.Parser
        GHC.Cmm.ProcPoint
        GHC.Cmm.Sinker
        GHC.Cmm.Syntax.Type
        GHC.Cmm.Util
        GHC.Cmm.LayoutStack
        GHC.Data.EnumSet
        GHC.Cmm.Syntax.Graph
        GHC.CmmToAsm.PrettyPrint
        GHC.CmmToC
        GHC.Cmm.Printer
        GHC.Cmm.Printer.Declaration
        GHC.Cmm.Printer.Expression
        GHC.Data.Bitmap
        GHC.Util.CodeGen.Platform
        GHC.Util.CodeGen.Platform.ARM
        GHC.Util.CodeGen.Platform.ARM64
        GHC.Util.CodeGen.Platform.NoRegs
        GHC.Util.CodeGen.Platform.PPC
        GHC.Util.CodeGen.Platform.PPC_Darwin
        GHC.Util.CodeGen.Platform.SPARC
        GHC.Util.CodeGen.Platform.X86
        GHC.Util.CodeGen.Platform.X86_64
        GHC.Stg.Util
        GHC.StgToCmm
        GHC.StgToCmm.Bind
        GHC.StgToCmm.Closure
        GHC.StgToCmm.Constructor
        GHC.StgToCmm.Environment
        GHC.StgToCmm.Expression
        GHC.StgToCmm.ForeignCall
        GHC.StgToCmm.Heap
        GHC.StgToCmm.Coverage
        GHC.StgToCmm.ArgRep
        GHC.StgToCmm.Layout
        GHC.StgToCmm.Monad
        GHC.StgToCmm.PrimOp
        GHC.StgToCmm.Profiling
        GHC.StgToCmm.Profiling.Ticky
        GHC.StgToCmm.Util
        GHC.StgToCmm.Monad.Extended
        GHC.RTS.Storage
        GHC.Core.Arity
        GHC.Core.FreeVars
        GHC.Core.Lint
        GHC.Core.Prepare
        GHC.Core.Subst
        GHC.Core.SimpleOpt
        GHC.Core.Syntax
        GHC.Data.TrieMap
        GHC.Core.Tidy
        GHC.Core.Inliner
        GHC.Core.Util
        GHC.Core.Syntax.Force
        GHC.Core.Stats
        GHC.Core.Syntax.Make
        GHC.Core.Printer
        GHC.HaskellToCore.Match.Expression
        GHC.HaskellToCore.Match.TermEqOracle
        GHC.HaskellToCore.Match.Check
        GHC.HaskellToCore.Coverage
        GHC.HaskellToCore
        GHC.HaskellToCore.Arrow
        GHC.HaskellToCore.Bind
        GHC.HaskellToCore.Foreign.Call
        GHC.HaskellToCore.Expression
        GHC.HaskellToCore.Foreign.Declaration
        GHC.HaskellToCore.GuardedRHS
        GHC.HaskellToCore.ListComp
        GHC.HaskellToCore.Monad
        GHC.HaskellToCore.Usage
        GHC.HaskellToCore.Util
        GHC.HaskellToCore.Match
        GHC.HaskellToCore.Match.Constructor
        GHC.HaskellToCore.Match.Literal
        GHC.Syntax.Bind
        GHC.Syntax.Declaration
        GHC.Syntax.Documentation
        GHC.Syntax.Expression
        GHC.Syntax.ImportExport
        GHC.Syntax.Literal
        GHC.Syntax.PlaceHolder
        GHC.Syntax.Extension
        GHC.Syntax.Pattern
        GHC.Syntax
        GHC.Syntax.Type
        GHC.Haskell.Util
        GHC.Haskell.Printer.Dump
        GHC.Interface.Binary
        GHC.Util.Binary.Fingerprint
        GHC.Interface.BuildTypeAndClass
        GHC.Interface.Environment
        GHC.Interface.Syntax
        GHC.Interface.Type
        GHC.CoreToInterface
        GHC.Interface.Load
        GHC.Interface.Util
        GHC.Interface.TypeCheck
        GHC.Config.Flags.Fingerprint
        GHC.CoreTypes.Annotation
        GHC.Driver.CmdLineParser
        GHC.Driver.CodeOutput
        GHC.Config.Build
        GHC.Config.Constants
        GHC.Driver.MakeDepend
        GHC.Driver.Phases
        GHC.Driver.Pipeline.Monad
        GHC.Driver.Pipeline
        GHC.Config.Flags
        GHC.Util.Error
        GHC.Driver.Finder
        GHC
        GHC.Driver.Make
        GHC.Plugin
        GHC.Interactive.DynamicLoading
        GHC.Haskell.Parser.HeaderInfo
        GHC.Driver.Main
        GHC.Haskell.Stats
        GHC.CoreTypes.Base
        GHC.Interactive.Eval
        GHC.Interactive.Types
        GHC.Packages.PackageConfig
        GHC.Packages
        GHC.Config.HostPlatform
        GHC.Plugin.Types
        GHC.Plugin.TypeChecker
        GHC.Util.PrettyPrint.TyThing
        GHC.Util.CodeGen.StaticPtrTable
        GHC.Util.SysTools
        GHC.Util.SysTools.Terminal
        GHC.Util.SysTools.ExtraObj
        GHC.Util.SysTools.Info
        GHC.Util.SysTools.Process
        GHC.Util.SysTools.Tasks
        GHC.Util.Elf
        GHC.Interface.Tidy
        GHC.Data.Char.Classification
        GHC.Haskell.Parser.Util
        GHC.Haskell.Lexer
        GHC.CoreTypes.Coercion.Optimise
        GHC.Haskell.Parser
        GHC.Haskell.Parser.Syntax
        GHC.Syntax.Annotation
        GHC.CoreTypes.ForeignCall
        GHC.Builtin.Uniques
        GHC.Builtin.Util
        GHC.Builtin.Names
        GHC.Core.ConstantFold
        GHC.Builtin.Primitive.Operations
        GHC.Builtin.Primitive.Types
        GHC.Builtin.Types
        GHC.CoreTypes.CostCentre
        GHC.CoreTypes.CostCentre.Init
        GHC.Stg.CostCentreCollect
        GHC.Haskell.Rename.Bind
        GHC.Haskell.Rename.Environment
        GHC.Haskell.Rename.Expression
        GHC.Haskell.Rename.Documentation
        GHC.Haskell.Rename.ImportExport
        GHC.Haskell.Rename.Pattern
        GHC.Haskell.Rename
        GHC.Haskell.Rename.Splice
        GHC.Haskell.Rename.Type
        GHC.Haskell.Rename.Fixity
        GHC.Haskell.Rename.Util
        GHC.Haskell.Rename.Util.Unbound
        GHC.Core.Monad
        GHC.Core.CommonSubExpr
        GHC.Core.FloatIn
        GHC.Core.FloatOut
        GHC.Core.LiberateCase
        GHC.Core.Occurence
        GHC.Core.StaticArgument
        GHC.Core.LevelSet
        GHC.Core.Pipeline
        GHC.Core.Simplify.Environment
        GHC.Core.Simplify.Monad
        GHC.Core.Simplify.Util
        GHC.Core.Simplify
        GHC.Stg.Pipeline
        GHC.Stg.Stats
        GHC.Stg.CommonSubExpr
        GHC.Stg.Unarise
        GHC.CoreTypes.RepType
        GHC.Core.Rules
        GHC.Core.Specialise.Constructor
        GHC.Core.Specialise
        GHC.CoreToStg
        GHC.Stg.Lint
        GHC.Stg.Syntax
        GHC.Core.CallArity
        GHC.Core.Demand
        GHC.Core.WorkerWrap
        GHC.Core.WorkerWrap.Util
        GHC.TypeCheck.FamilyInstance
        GHC.TypeCheck.Instantiation
        GHC.TypeCheck.Annotation
        GHC.TypeCheck.Arrow
        GHC.TypeCheck.Bind
        GHC.TypeCheck.Signature
        GHC.TypeCheck.Class
        GHC.TypeCheck.Default
        GHC.TypeCheck.Deriving
        GHC.Haskell.Derive.Constraints
        GHC.Haskell.Derive.Util
        GHC.TypeCheck.Environment
        GHC.TypeCheck.Expression
        GHC.TypeCheck.Foreign
        GHC.Haskell.Derive.BasicClasses
        GHC.Haskell.Derive.Functor
        GHC.Haskell.Derive.Generic
        GHC.TypeCheck.Syntax
        GHC.TypeCheck.Type
        GHC.TypeCheck.Instance
        GHC.TypeCheck.Util.Monadic
        GHC.TypeCheck.Validity
        GHC.TypeCheck.Match
        GHC.TypeCheck.Pattern
        GHC.TypeCheck.PatternSynonym
        GHC.TypeCheck.Module
        GHC.TypeCheck.ModuleSignature
        GHC.TypeCheck.Export
        GHC.TypeCheck.Monad
        GHC.TypeCheck.Util
        GHC.TypeCheck.Rule
        GHC.TypeCheck.Simplify
        GHC.TypeCheck.Error
        GHC.TypeCheck.TypeDecl
        GHC.TypeCheck.TypeDeclUtil
        GHC.Haskell.Derive.Typeable
        GHC.TypeCheck.Util.CoreType
        GHC.TypeCheck.Evidence
        GHC.TypeCheck.Unify
        GHC.TypeCheck.Solver.Interact
        GHC.TypeCheck.Solver.Canonicalise
        GHC.TypeCheck.Solver.Flatten
        GHC.TypeCheck.Solver.Monad
        GHC.Builtin.TypeNats
        GHC.TypeCheck.Splice
        GHC.CoreTypes.Class
        GHC.CoreTypes.Coercion
        GHC.HaskellToCore.Splice
        GHC.Builtin.Names.TemplateHaskell
        GHC.CoreTypes.FamilyInstance
        GHC.TypeCheck.FunctionalDependency
        GHC.CoreTypes.Instance
        GHC.CoreTypes.TyCon
        GHC.CoreTypes.Coercion.Axiom
        GHC.CoreTypes.Kind
        GHC.CoreTypes.Type
        GHC.CoreTypes.Type.Internal
        GHC.CoreTypes.Type.Unify
        GHC.Data.Bag
        GHC.Util.Binary
        GHC.Data.BoolFormula
        GHC.Util.Handle.BufferedWrite
        GHC.Data.Graph.Directed
        GHC.Data.Char.Encoding
        GHC.Util.IO.Unsafe
        GHC.Data.FastMutableInt
        GHC.Data.FastString
        GHC.Data.FastString.Environment
        GHC.Util.Fingerprint
        GHC.Data.FiniteMap
        GHC.CoreTypes.Var.Free
        GHC.Data.Graph.Base
        GHC.Data.Graph.Color
        GHC.Data.Graph.Operations
        GHC.Data.Graph.PrettyPrint
        GHC.Util.Monad.IOEnv
        GHC.Util.Json
        GHC.Data.List.SetOps
        GHC.Util.Monad.ListT
        GHC.Data.Maybe
        GHC.Util.Monad
        GHC.Data.OrdList
        GHC.Util.Outputable
        GHC.Data.Pair
        GHC.Util.Panic
        GHC.Util.PrettyPrint.Colour
        GHC.Util.PrettyPrint
        GHC.Util.Monad.State
        GHC.Data.Stream
        GHC.Data.StringBuffer
        GHC.Data.UniqueDFM
        GHC.Data.UniqueDSet
        GHC.Data.UniqueFM
        GHC.Data.UniqueMap
        GHC.Data.UniqueSet
        GHC.Util
        GHC.Core.Vectorise.Builtins.Base
        GHC.Core.Vectorise.Builtins.Initialise
        GHC.Core.Vectorise.Builtins
        GHC.Core.Vectorise.Monad.Base
        GHC.Core.Vectorise.Monad.Naming
        GHC.Core.Vectorise.Monad.Local
        GHC.Core.Vectorise.Monad.Global
        GHC.Core.Vectorise.Monad.InstEnv
        GHC.Core.Vectorise.Monad
        GHC.Core.Vectorise.Util.Base
        GHC.Core.Vectorise.Util.Closure
        GHC.Core.Vectorise.Util.Hoisting
        GHC.Core.Vectorise.Util.PADict
        GHC.Core.Vectorise.Util.Poly
        GHC.Core.Vectorise.Util
        GHC.Core.Vectorise.Generic.Description
        GHC.Core.Vectorise.Generic.PAMethods
        GHC.Core.Vectorise.Generic.PADict
        GHC.Core.Vectorise.Generic.PData
        GHC.Core.Vectorise.Type.Env
        GHC.Core.Vectorise.Type.Type
        GHC.Core.Vectorise.Type.TyConDecl
        GHC.Core.Vectorise.Type.Classify
        GHC.Core.Vectorise.Convert
        GHC.Core.Vectorise.Vect
        GHC.Core.Vectorise.Var
        GHC.Core.Vectorise.Env
        GHC.Core.Vectorise.Exp
        GHC.Core.Vectorise
        GHC.Cmm.Dataflow
        GHC.Cmm.Dataflow.Block
        GHC.Cmm.Dataflow.Collections
        GHC.Cmm.Dataflow.Graph
        GHC.Cmm.Dataflow.Label
        GHC.Cmm.Dataflow.Unique
--        CgInfoTbls used in ghci/DebuggerUtils
--        CgHeapery  mkVirtHeapOffsets used in ghci

    Exposed-Modules:
            GHC.CmmToAsm
            GHC.CmmToAsm.Register.Target
            GHC.CmmToAsm.Monad
            GHC.CmmToAsm.Instruction
            GHC.CmmToAsm.Format
            GHC.CmmToAsm.Register
            GHC.CmmToAsm.Register.Class
            GHC.CmmToAsm.PIC
            GHC.Util.Platform
            GHC.Util.CodeGen.Primitive
            GHC.CmmToAsm.X86.Regs
            GHC.CmmToAsm.X86.RegInfo
            GHC.CmmToAsm.X86.Instr
            GHC.CmmToAsm.X86.Cond
            GHC.CmmToAsm.X86.Ppr
            GHC.CmmToAsm.X86.CodeGen
            GHC.CmmToAsm.PPC.Regs
            GHC.CmmToAsm.PPC.RegInfo
            GHC.CmmToAsm.PPC.Instr
            GHC.CmmToAsm.PPC.Cond
            GHC.CmmToAsm.PPC.Ppr
            GHC.CmmToAsm.PPC.CodeGen
            GHC.CmmToAsm.SPARC.Base
            GHC.CmmToAsm.SPARC.Regs
            GHC.CmmToAsm.SPARC.Imm
            GHC.CmmToAsm.SPARC.AddrMode
            GHC.CmmToAsm.SPARC.Cond
            GHC.CmmToAsm.SPARC.Instr
            GHC.CmmToAsm.SPARC.Stack
            GHC.CmmToAsm.SPARC.ShortcutJump
            GHC.CmmToAsm.SPARC.Ppr
            GHC.CmmToAsm.SPARC.CodeGen
            GHC.CmmToAsm.SPARC.CodeGen.Amode
            GHC.CmmToAsm.SPARC.CodeGen.Base
            GHC.CmmToAsm.SPARC.CodeGen.CondCode
            GHC.CmmToAsm.SPARC.CodeGen.Gen32
            GHC.CmmToAsm.SPARC.CodeGen.Gen64
            GHC.CmmToAsm.SPARC.CodeGen.Sanity
            GHC.CmmToAsm.SPARC.CodeGen.Expand
            GHC.CmmToAsm.RegAlloc.Liveness
            GHC.CmmToAsm.RegAlloc.Graph.Main
            GHC.CmmToAsm.RegAlloc.Graph.Stats
            GHC.CmmToAsm.RegAlloc.Graph.ArchBase
            GHC.CmmToAsm.RegAlloc.Graph.ArchX86
            GHC.CmmToAsm.RegAlloc.Graph.Coalesce
            GHC.CmmToAsm.RegAlloc.Graph.Spill
            GHC.CmmToAsm.RegAlloc.Graph.SpillClean
            GHC.CmmToAsm.RegAlloc.Graph.SpillCost
            GHC.CmmToAsm.RegAlloc.Graph.TrivColorable
            GHC.CmmToAsm.RegAlloc.Linear.Main
            GHC.CmmToAsm.RegAlloc.Linear.JoinToTargets
            GHC.CmmToAsm.RegAlloc.Linear.State
            GHC.CmmToAsm.RegAlloc.Linear.Stats
            GHC.CmmToAsm.RegAlloc.Linear.FreeRegs
            GHC.CmmToAsm.RegAlloc.Linear.StackMap
            GHC.CmmToAsm.RegAlloc.Linear.Base
            GHC.CmmToAsm.RegAlloc.Linear.X86.FreeRegs
            GHC.CmmToAsm.RegAlloc.Linear.X86_64.FreeRegs
            GHC.CmmToAsm.RegAlloc.Linear.PPC.FreeRegs
            GHC.CmmToAsm.RegAlloc.Linear.SPARC.FreeRegs
            GHC.CmmToAsm.Dwarf
            GHC.CmmToAsm.Dwarf.Types
            GHC.CmmToAsm.Dwarf.Constants
            GHC.Haskell.Template
            GHC.ByteCode.Types
            GHC.ByteCode.Assembler
            GHC.CoreToByteCode
            GHC.ByteCode.Instruction
            GHC.ByteCode.InfoTable
            GHC.ByteCode.Linker
            GHC.Interactive.Debugger
            GHC.Interactive.Linker
            GHC.Interactive.ClosureInspect
            GHC.Interactive.Debugger.Util
            GHC.Interactive.Interpreter
