-- WARNING: ghc.cabal is automatically generated from ghc.cabal.in by
-- ./configure.  Make sure you are editing ghc.cabal.in, not ghc.cabal.

Name: ghc
Version: @ProjectVersionMunged@
License: BSD3
License-File: ../LICENSE
Author: The GHC Team
Maintainer: glasgow-haskell-users@haskell.org
Homepage: http://www.haskell.org/ghc/
Synopsis: The GHC API
Description:
    GHC's functionality can be useful for more things than just
    compiling Haskell programs. Important use cases are programs
    that analyse (and perhaps transform) Haskell code. Others
    include loading Haskell code dynamically in a GHCi-like manner.
    For this reason, a lot of GHC's functionality is made available
    through this package.
Category: Development
Build-Type: Simple
Cabal-Version: >=1.10

Flag ghci
    Description: Build GHCi support.
    Default: False
    Manual: True

Flag stage1
    Description: Is this stage 1?
    Default: False
    Manual: True

Flag stage2
    Description: Is this stage 2?
    Default: False
    Manual: True

Flag stage3
    Description: Is this stage 3?
    Default: False
    Manual: True

Flag terminfo
    Description: Build GHC with terminfo support on non-Windows platforms.
    Default: True
    Manual: True

Library
    Default-Language: Haskell2010
    Exposed: False

    Build-Depends: base       >= 4   && < 5,
                   deepseq    >= 1.4 && < 1.5,
                   directory  >= 1   && < 1.4,
                   process    >= 1   && < 1.7,
                   bytestring >= 0.9 && < 0.11,
                   binary     == 0.8.*,
                   time       >= 1.4 && < 1.9,
                   containers >= 0.5 && < 0.6,
                   array      >= 0.1 && < 0.6,
                   filepath   >= 1   && < 1.5,
                   template-haskell == 2.12.*,
                   hpc        == 0.6.*,
                   transformers == 0.5.*,
                   ghc-boot   == @ProjectVersionMunged@,
                   ghc-boot-th == @ProjectVersionMunged@,
                   ghci == @ProjectVersionMunged@,
                   hoopl      >= 3.10.2 && < 3.11

    if os(windows)
        Build-Depends: Win32  >= 2.3 && < 2.6
    else
        if flag(terminfo)
            Build-Depends: terminfo == 0.4.*
        Build-Depends: unix   == 2.7.*

    GHC-Options: -Wall -fno-warn-name-shadowing

    if flag(ghci)
        CPP-Options: -DGHCI
        Include-Dirs: ../rts/dist/build @FFIIncludeDir@

    Other-Extensions:
        BangPatterns
        CPP
        DataKinds
        DeriveDataTypeable
        DeriveFoldable
        DeriveFunctor
        DeriveTraversable
        DisambiguateRecordFields
        ExplicitForAll
        FlexibleContexts
        FlexibleInstances
        GADTs
        GeneralizedNewtypeDeriving
        MagicHash
        MultiParamTypeClasses
        NamedFieldPuns
        NondecreasingIndentation
        RankNTypes
        RecordWildCards
        ScopedTypeVariables
        StandaloneDeriving
        Trustworthy
        TupleSections
        TypeFamilies
        TypeSynonymInstances
        UnboxedTuples
        UndecidableInstances

    Include-Dirs: . parser

    -- We need to set the unit id to ghc (without a version number)
    -- as it's magic.  But we can't set it for old versions of GHC (e.g.
    -- when bootstrapping) because those versions of GHC don't understand
    -- that GHC is wired-in.
    if impl ( ghc >= 7.11 )
        GHC-Options: -this-unit-id ghc
    else
        if impl( ghc >= 7.9 )
            GHC-Options: -this-package-key ghc

    if flag(stage1)
        Include-Dirs: stage1
    else
        if flag(stage2)
            Include-Dirs: stage2
        else
            if flag(stage3)
                Include-Dirs: stage2

    Install-Includes: HsVersions.h, ghc_boot_platform.h

    c-sources:
        parser/cutils.c
        ghci/keepCAFsForGHCi.c
        cbits/genSym.c

    hs-source-dirs:
        ./
        backpack
        codeGen
        ghci
        iface
        llvmGen
        nativeGen
        parser
        prelude
        profiling
        typecheck

    Exposed-Modules:
        DriverBkp
        BkpSyn
        NameShape
        GHC.Interface.Renaming
        GHC.Data.Available
        GHC.Data.BasicTypes
        GHC.Data.ConstructorLike
        GHC.Data.DataConstructor
        GHC.Data.PatternSynonym
        GHC.Data.Demand
        GHC.IR.Cmm.DebugBlock
        GHC.Utils.Exception
        GHC.Data.FieldLabel
        GHC.Monad
        GHC.Config.Hooks
        GHC.Data.Id
        GHC.Data.Id.Info
        GHC.Utils.Identifier
        GHC.Data.Literal
        Llvm
        Llvm.AbsSyn
        Llvm.MetaData
        Llvm.PpLlvm
        Llvm.Types
        LlvmCodeGen
        LlvmCodeGen.Base
        LlvmCodeGen.CodeGen
        LlvmCodeGen.Data
        LlvmCodeGen.Ppr
        LlvmCodeGen.Regs
        LlvmMangler
        GHC.Data.Id.Make
        GHC.Data.Module
        GHC.Data.Name
        GHC.Data.Name.Environment
        GHC.Data.Name.Set
        GHC.Data.OccName
        GHC.Data.RdrName
        GHC.Data.Name.Cache
        GHC.Data.SrcLoc
        GHC.Data.Unique.Supply
        GHC.Data.Unique
        GHC.Data.Var
        GHC.Data.Var.Environment
        GHC.Data.Var.Set
        GHC.Data.Var.UndirectedGraph
        GHC.IR.Cmm.BlockId
        GHC.Data.CLabel
        GHC.IR.Cmm
        GHC.IR.Cmm.BuildInfoTables
        GHC.IR.Cmm.Pipeline
        GHC.IR.Cmm.CallConvention
        GHC.IR.Cmm.Transform.CommonBlockElim
        GHC.IR.Cmm.Switch.Implement
        GHC.IR.Cmm.Transform.Shortcutting
        GHC.IR.Cmm.Expr
        GHC.RTS.InfoTable
        GHC.IR.Cmm.Lexer
        GHC.IR.Cmm.Analyse.Lint
        GHC.IR.Cmm.Analyse.Liveness
        GHC.IR.Cmm.MachinePrimOps
        GHC.IR.Cmm.Parser.Monad
        GHC.IR.Cmm.Switch
        GHC.IR.Cmm.Node
        GHC.IR.Cmm.Transform.ConstantFolding
        GHC.IR.Cmm.Parser
        GHC.IR.Cmm.ProcPoint
        GHC.IR.Cmm.Transform.Sinking
        GHC.IR.Cmm.Type
        GHC.IR.Cmm.Utils
        GHC.IR.Cmm.LayoutStack
        GHC.Data.EnumSet
        GHC.IR.Cmm.Graph
        PprBase
        GHC.IR.Cmm.PrettyPrint.C
        GHC.IR.Cmm.PrettyPrint
        GHC.IR.Cmm.PrettyPrint.Declaration
        GHC.IR.Cmm.PrettyPrint.Expression
        GHC.Utils.Bitmap
        CodeGen.Platform
        CodeGen.Platform.ARM
        CodeGen.Platform.ARM64
        CodeGen.Platform.NoRegs
        CodeGen.Platform.PPC
        CodeGen.Platform.PPC_Darwin
        CodeGen.Platform.SPARC
        CodeGen.Platform.X86
        CodeGen.Platform.X86_64
        CgUtils
        StgCmm
        StgCmmBind
        StgCmmClosure
        StgCmmCon
        StgCmmEnv
        StgCmmExpr
        StgCmmForeign
        StgCmmHeap
        StgCmmHpc
        StgCmmArgRep
        StgCmmLayout
        StgCmmMonad
        StgCmmPrim
        StgCmmProf
        StgCmmTicky
        StgCmmUtils
        StgCmmExtCode
        GHC.RTS.Storage
        GHC.IR.Core.Arity
        GHC.IR.Core.FreeVars
        GHC.IR.Core.Analyse.Lint
        GHC.Compilers.CoreToStg.Prepare
        GHC.IR.Core.Substitution
        GHC.IR.Core.Transform.Simple
        GHC.IR.Core.Syntax
        GHC.Data.TrieMap
        GHC.IR.Core.Tidy
        GHC.IR.Core.Transform.Unfolding
        GHC.IR.Core.Utils
        GHC.IR.Core.Force
        GHC.IR.Core.Analyse.Stats
        GHC.IR.Core.Syntax.Make
        GHC.IR.Core.PrettyPrint
        GHC.Compilers.SyntaxToCore.Match.Expr
        GHC.Compilers.SyntaxToCore.Match.TermEqOracle
        GHC.Compilers.SyntaxToCore.Match.Check
        GHC.Compilers.SyntaxToCore.Coverage
        GHC.Compilers.SyntaxToCore.Main
        GHC.Compilers.SyntaxToCore.Arrow
        GHC.Compilers.SyntaxToCore.Binding
        GHC.Compilers.SyntaxToCore.Foreign.Call
        GHC.Compilers.SyntaxToCore.Expression
        GHC.Compilers.SyntaxToCore.Foreign.Declaration
        GHC.Compilers.SyntaxToCore.GuardedRHS
        GHC.Compilers.SyntaxToCore.ListComp
        GHC.Compilers.SyntaxToCore.Monad
        GHC.Compilers.SyntaxToCore.Usage
        GHC.Compilers.SyntaxToCore.Utils
        GHC.Compilers.SyntaxToCore.Match
        GHC.Compilers.SyntaxToCore.Match.Constructor
        GHC.Compilers.SyntaxToCore.Match.Literal
        GHC.Syntax.Binding
        GHC.Syntax.Declaration
        GHC.Syntax.Documentation
        GHC.Syntax.Expression
        GHC.Syntax.ImportExport
        GHC.Syntax.Literal
        GHC.Syntax.PlaceHolder
        GHC.Syntax.Pattern
        GHC.Syntax
        GHC.Syntax.Type
        GHC.Syntax.Utils
        GHC.Syntax.PrettyPrint.Dump
        BinIface
        BinFingerprint
        BuildTyCl
        IfaceEnv
        IfaceSyn
        IfaceType
        ToIface
        LoadIface
        MkIface
        TcIface
        GHC.Config.Flags.Fingerprint
        GHC.Data.Annotation
        GHC.Program.CmdLineParser
        GHC.Program.Driver.CodeOutput
        Config
        GHC.Config.Constants
        GHC.Program.MakeDepend
        GHC.Program.Driver.Phases
        GHC.Program.Driver.Pipeline.Monad
        GHC.Program.Driver.Pipeline
        GHC.Config.Flags
        GHC.Utils.Error
        GHC.Finder
        GHC
        GHC.Program.Make
        GHC.Plugins
        GHC.Interactive.DynamicLoading
        GHC.Syntax.Parsers.HeaderInfo
        GHC.Program.Main
        GHC.Syntax.Analyse.Stats
        GHC.Types
        GHC.Interactive.Eval
        GHC.Interactive.Types
        GHC.Packages.PackageConfig
        GHC.Packages
        GHC.Config.Platform.Constants
        GHC.Plugins.Types
        TcPluginM
        GHC.Utils.PrettyPrint.TyThing
        GHC.Utils.CodeGen.StaticPtrTable
        GHC.Utils.SysTools
        GHC.Utils.SysTools.Terminal
        GHC.Utils.Elf
        GHC.Interface.Tidy
        Ctype
        HaddockUtils
        Lexer
        GHC.Data.Coercion.Optimise
        Parser
        RdrHsSyn
        ApiAnnotation
        ForeignCall
        KnownUniques
        PrelInfo
        PrelNames
        PrelRules
        PrimOp
        TysPrim
        TysWiredIn
        CostCentre
        ProfInit
        SCCfinal
        GHC.Rename.Binding
        GHC.Rename.Environment
        GHC.Rename.Expression
        GHC.Rename.Documentation
        GHC.Rename.ImportExport
        GHC.Rename.Pattern
        GHC.Rename.Main
        GHC.Rename.Splice
        GHC.Rename.Type
        GHC.Rename.Fixity
        GHC.Rename.Utils
        GHC.Rename.Utils.Unbound
        GHC.IR.Core.Monad
        GHC.IR.Core.Transform.CommonSubExpr
        GHC.IR.Core.Transform.FloatIn
        GHC.IR.Core.Transform.FloatOut
        GHC.IR.Core.Transform.LiberateCase
        GHC.IR.Core.Analyse.Occurence
        GHC.IR.Core.Transform.StaticArgument
        GHC.IR.Core.Transform.LevelSetting
        GHC.IR.Core.Transform.Pipeline
        GHC.IR.Core.Transform.Simplify.Environment
        GHC.IR.Core.Transform.Simplify.Monad
        GHC.IR.Core.Transform.Simplify.Utils
        GHC.IR.Core.Transform.Simplify
        GHC.IR.Stg.Transform.Pipeline
        GHC.IR.Stg.Analyse.Stats
        GHC.IR.Stg.Transform.CommonSubExpr
        GHC.IR.Stg.Transform.Unarise
        GHC.Data.RepType
        GHC.IR.Core.Transform.Rules
        GHC.IR.Core.Transform.Specialise.Constructor
        GHC.IR.Core.Transform.Specialise
        GHC.Compilers.CoreToStg
        GHC.IR.Stg.Analyse.Lint
        GHC.IR.Stg.Syntax
        GHC.IR.Core.Analyse.CallArity
        GHC.IR.Core.Analyse.Demand
        GHC.IR.Core.Transform.WorkerWrapper
        GHC.IR.Core.Transform.WorkerWrapper.Utils
        FamInst
        Inst
        TcAnnotations
        TcArrows
        TcBinds
        TcSigs
        TcClassDcl
        TcDefaults
        TcDeriv
        TcDerivInfer
        TcDerivUtils
        TcEnv
        TcExpr
        TcForeign
        TcGenDeriv
        TcGenFunctor
        TcGenGenerics
        TcHsSyn
        TcHsType
        TcInstDcls
        TcMType
        TcValidity
        TcMatches
        TcPat
        TcPatSyn
        TcRnDriver
        TcBackpack
        TcRnExports
        TcRnMonad
        TcRnTypes
        TcRules
        TcSimplify
        TcErrors
        TcTyClsDecls
        TcTyDecls
        TcTypeable
        TcType
        TcEvidence
        TcUnify
        TcInteract
        TcCanonical
        TcFlatten
        TcSMonad
        TcTypeNats
        TcSplice
        GHC.Data.Class
        GHC.Data.Coercion
        GHC.Compilers.SyntaxToCore.Splices
        THNames
        GHC.TypeSystem.FamilyInstance
        FunDeps
        GHC.TypeSystem.ClassInstance
        GHC.Data.Type.Constructor
        GHC.Data.Coercion.Axiom
        GHC.Data.Kind
        GHC.Data.Type
        GHC.Data.Types
        GHC.TypeSystem.Unify
        GHC.Data.Bag
        GHC.Utils.Binary
        GHC.Data.Bool.Formula
        GHC.Utils.Handle.BufferedWrite
        GHC.Data.Graph.Directed
        GHC.Data.Char.Encoding
        GHC.Utils.IO.Unsafe
        GHC.Data.FastMutableInt
        GHC.Data.FastString
        GHC.Data.FastString.Environment
        GHC.Utils.Fingerprint
        GHC.Data.FiniteMap
        GHC.Data.Var.Free
        GHC.Data.Graph.Base
        GHC.Data.Graph.Color
        GHC.Data.Graph.Operations
        GHC.Data.Graph.PrettyPrint
        GHC.Utils.Monad.IOEnv
        GHC.Utils.Json
        GHC.Data.List.SetOps
        GHC.Utils.Monad.ListT
        GHC.Data.Maybe
        GHC.Utils.Monad
        GHC.Data.Tree.OrdList
        GHC.Utils.Outputable
        GHC.Data.Pair
        GHC.Utils.Panic
        GHC.Utils.PrettyPrint.Colour
        GHC.Utils.PrettyPrint
        GHC.Utils.Monad.State
        GHC.Data.Stream
        GHC.Data.StringBuffer
        GHC.Data.Unique.DeterFiniteMap
        GHC.Data.Unique.DeterSet
        GHC.Data.Unique.FiniteMap
        GHC.Data.Unique.Map
        GHC.Data.Unique.Set
        GHC.Utils
        GHC.IR.Core.Transform.Vectorise.Builtins.Base
        GHC.IR.Core.Transform.Vectorise.Builtins.Initialise
        GHC.IR.Core.Transform.Vectorise.Builtins
        GHC.IR.Core.Transform.Vectorise.Monad.Base
        GHC.IR.Core.Transform.Vectorise.Monad.Naming
        GHC.IR.Core.Transform.Vectorise.Monad.Local
        GHC.IR.Core.Transform.Vectorise.Monad.Global
        GHC.IR.Core.Transform.Vectorise.Monad.InstEnv
        GHC.IR.Core.Transform.Vectorise.Monad
        GHC.IR.Core.Transform.Vectorise.Utils.Base
        GHC.IR.Core.Transform.Vectorise.Utils.Closure
        GHC.IR.Core.Transform.Vectorise.Utils.Hoisting
        GHC.IR.Core.Transform.Vectorise.Utils.PADict
        GHC.IR.Core.Transform.Vectorise.Utils.Poly
        GHC.IR.Core.Transform.Vectorise.Utils
        GHC.IR.Core.Transform.Vectorise.Generic.Description
        GHC.IR.Core.Transform.Vectorise.Generic.PAMethods
        GHC.IR.Core.Transform.Vectorise.Generic.PADict
        GHC.IR.Core.Transform.Vectorise.Generic.PData
        GHC.IR.Core.Transform.Vectorise.Type.Env
        GHC.IR.Core.Transform.Vectorise.Type.Type
        GHC.IR.Core.Transform.Vectorise.Type.TyConDecl
        GHC.IR.Core.Transform.Vectorise.Type.Classify
        GHC.IR.Core.Transform.Vectorise.Convert
        GHC.IR.Core.Transform.Vectorise.Vect
        GHC.IR.Core.Transform.Vectorise.Var
        GHC.IR.Core.Transform.Vectorise.Env
        GHC.IR.Core.Transform.Vectorise.Exp
        GHC.IR.Core.Transform.Vectorise
        GHC.IR.Cmm.Transform.Dataflow.Hoopl
        GHC.IR.Cmm.Transform.Dataflow
--        CgInfoTbls used in ghci/DebuggerUtils
--        CgHeapery  mkVirtHeapOffsets used in ghci

    Exposed-Modules:
            AsmCodeGen
            TargetReg
            NCGMonad
            Instruction
            Format
            Reg
            RegClass
            PIC
            GHC.Platform
            CPrim
            X86.Regs
            X86.RegInfo
            X86.Instr
            X86.Cond
            X86.Ppr
            X86.CodeGen
            PPC.Regs
            PPC.RegInfo
            PPC.Instr
            PPC.Cond
            PPC.Ppr
            PPC.CodeGen
            SPARC.Base
            SPARC.Regs
            SPARC.Imm
            SPARC.AddrMode
            SPARC.Cond
            SPARC.Instr
            SPARC.Stack
            SPARC.ShortcutJump
            SPARC.Ppr
            SPARC.CodeGen
            SPARC.CodeGen.Amode
            SPARC.CodeGen.Base
            SPARC.CodeGen.CondCode
            SPARC.CodeGen.Gen32
            SPARC.CodeGen.Gen64
            SPARC.CodeGen.Sanity
            SPARC.CodeGen.Expand
            RegAlloc.Liveness
            RegAlloc.Graph.Main
            RegAlloc.Graph.Stats
            RegAlloc.Graph.ArchBase
            RegAlloc.Graph.ArchX86
            RegAlloc.Graph.Coalesce
            RegAlloc.Graph.Spill
            RegAlloc.Graph.SpillClean
            RegAlloc.Graph.SpillCost
            RegAlloc.Graph.TrivColorable
            RegAlloc.Linear.Main
            RegAlloc.Linear.JoinToTargets
            RegAlloc.Linear.State
            RegAlloc.Linear.Stats
            RegAlloc.Linear.FreeRegs
            RegAlloc.Linear.StackMap
            RegAlloc.Linear.Base
            RegAlloc.Linear.X86.FreeRegs
            RegAlloc.Linear.X86_64.FreeRegs
            RegAlloc.Linear.PPC.FreeRegs
            RegAlloc.Linear.SPARC.FreeRegs
            Dwarf
            Dwarf.Types
            Dwarf.Constants
            GHC.Syntax.TemplateHaskell.Convert
            ByteCodeTypes
            ByteCodeAsm
            ByteCodeGen
            ByteCodeInstr
            ByteCodeItbls
            ByteCodeLink
            Debugger
            Linker
            RtClosureInspect
            DebuggerUtils
            GHCi

    if !flag(stage1)
        -- ghc:Serialized moved to ghc-boot:GHC.Serialized.  So for
        -- compatibility with GHC 7.10 and earlier, we reexport it
        -- under the old name.
        reexported-modules:
            ghc-boot:GHC.Serialized as Serialized
